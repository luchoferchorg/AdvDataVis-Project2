<html>
    <head>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>
    </head>
    <title>Testing maps</title>
    <body>
    <div id='map' style="width:100%; height:100% ; position: relative;"></div>
    <script>
        var map = L.map('map',{maxZoom:14,minZoom:10}).setView([40.7608,-111.8910], 12);
        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'pk.eyJ1IjoibHVmZXJvZHJpZ3VleiIsImEiOiJja3RjZ3NhcDUwNXczMnhwaWNsYWoza2g1In0.fKg-OIe61K3QHUHyNmtKaA'
            }).addTo(map);
        L.marker([40.7608,-111.8910]).addTo(map);
        L.marker([40.7334390222797,-111.870315970693]).addTo(map);
        L.marker([40.8053,-111.8529]).addTo(map)

        var pointA = new L.LatLng(40.76705,-111.85204);
        var pointB = new L.LatLng(40.76709003,-111.85234);
        var pointList = [pointA, pointB];

        var firstpolyline = new L.Polyline(pointList, {
            color: 'red',
            weight: 10,
            opacity: 0.5,
            smoothFactor: 1
        });
        firstpolyline.addTo(map);

        var pointA = new L.LatLng(40.77078997,-111.8474);
        var pointB = new L.LatLng(40.77088,-111.847199);
        var pointList = [pointA, pointB];

        var secpolyline = new L.Polyline(pointList, {
            color: 'red',
            weight: 10,
            opacity: 0.5,
            smoothFactor: 1
        });
        secpolyline.addTo(map);

        // define the customized icon
        var busIcon = L.icon({
            iconUrl: 'icons/bus-icon.png',
            iconSize: [18.56, 20],
            iconAnchor: [9.28, 20],
            popupAnchor: [0, -20]
        });
        var x = L.marker([40.7508,-111.8210], {icon: busIcon}).addTo(map).bindPopup("I am a bus.");

        var chargingStationIcon = L.icon({
            iconUrl: 'icons/charging-station.png',
            iconSize: [26, 44],
            iconAnchor: [13, 44],
            popupAnchor: [0, -44]
        });
        var y = L.marker([40.7508,-111.8310], {icon: chargingStationIcon}).addTo(map).bindPopup("I am a charging station.");

        // scale the marker size with the zoom
        map.on('zoomend', function() {
            var currentZoom = map.getZoom();
            var zoomedBusIcon = new L.Icon({
                iconUrl: 'icons/bus-icon.png',
                iconSize: [18.56*(1 + (currentZoom-12)/5), 20*(1 + (currentZoom-12)/5)],
                iconAnchor: [9.28*(1 + (currentZoom-12)/5), 20*(1 + (currentZoom-12)/5)],
                popupAnchor: [0, -20*(1 + (currentZoom-12)/5)]
            });
            var zoomedCharging = new L.Icon({
                iconUrl: 'icons/charging-station.png',
                iconSize: [26*(1 + (currentZoom-12)/5), 44*(1 + (currentZoom-12)/5)],
                iconAnchor: [13*(1 + (currentZoom-12)/5), 44*(1 + (currentZoom-12)/5)],
                popupAnchor: [0, -44*(1 + (currentZoom-12)/5)]
            });
            x.setIcon(zoomedBusIcon);
            y.setIcon(zoomedCharging);
        });

    </script>
    
    </body>
</html>